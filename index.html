<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel = "stylesheet" href ="https://www.w3schools.com/w3css/4/w3.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <style>
    /* Remove the navbar's default margin-bottom and rounded borders */ 
    .navbar {
      margin-bottom: 0;
      border-radius: 0;
    }
    
    /* Set height of the grid so .sidenav can be 100% (adjust as needed) */
    .row.content {height: 450px}
    
    /* Set gray background color and 100% height */
    .sidenav {
      padding-top: 20px;
      background-color: #f1f1f1;
      height: 100%;
    }
    
    /* Set black background color, white text and some padding */
    footer {
      background-color: #555;
      color: white;
      padding: 15px;
    }
    
    /* On small screens, set height to 'auto' for sidenav and grid */
    @media screen and (max-width: 767px) {
      .sidenav {
        height: auto;
        padding: 15px;
      }
      .row.content {height:auto;} 
    }
	button{
		position:center;
		display:block;
		margin:auto;
		width:10%;
		font-size:24px;
		border-radius:24px;
		transition-duration: 0.4s;
	}
	button:hover{
		background-color:gray;
		color:white;
	}
	
	
  </style>
</head>
<body>

<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>                        
      </button>
      <a href = "index.html"><img src = "icon.png" height="50" width="50"></a>
    </div>
    <div class="collapse navbar-collapse" id="myNavbar">
      <ul class="nav navbar-nav">
      </ul>
      <ul class="nav navbar-nav navbar-right">
       
      </ul>
    </div>
  </div>
</nav>
<div class="container-fluid text-center">    
  <div class="row content">
    <div class="text-center" style = "display:block; margin:auto; position:center"> 
      <h1>Hekermenz</h1>
      <p style = "width:67%; display:block; margin:auto; position:center">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
      <hr>
      <h3>Enter input below</h3>

      <textarea placeholder = "Begin your sentence here..." rows = "5" cols = "120" id = "maintext">dick dick dick fusss</textarea>
    </div>
    <div style = "padding:15px">
	<p id="RecommendationText">DAJfdjshgklhdgdhfdghfdsjgdsjfhgeslijdfhgljsgjkhgflkjdlkjgdslkjdhhshhsdglkjhgkjdfh</p>
</div>
  </div>
</div>
<script>
function TextScan(){
	var strings = document.getElementById("maintext").value;
	var text = strings.split(" ");
	return text;
}
function getSelectionText(){
	var text = "";
	if (window.getSelection) {
		text = window.getSelection().toString();
	} else if (document.selection && document.selection.type != "Control"){
		text = document.selection.createRange().text;
	}
  wordArr = text.replace(/[^a-zA-Z ]/g,'').split(" ");
	return wordArr;
}


function jQueryMain(){
  $.extend({
    GetSynonyms: function(Text){
      console.log("GetSynonyms");
      var synList = [];
      $.ajax({
          url: 'https://wordsapiv1.p.mashape.com/words/'+Text+'/synonyms',
          type: 'get',
          headers: {
              'X-Mashape-Key': "RBGdikllvBmshXcwx3hyEE5gIwXjp1KJuxZjsnzcGMfpfOq2Vp",   //If your header name has spaces or any other char not appropriate
              'X-Mashape-Host': "wordsapiv1.p.mashape.com"  //for object property name, use quoted notation shown in second
          },
          success: function (data) {
            console.info("data:")
              console.info(data);
          for (var i = 0; i < data.synonyms.length; i++) {
              synList.push(data.synonyms[i]);
          }
          console.info("synlist:");
          console.info(synList)
          },
          async: false,
        error: function (xhr, ajaxOptions, thrownError){
            console.info("Error:"+Text);
            console.info(thrownError);
        }

      });
      if(typeof synList === 'undefined' || synList.length <= 0)
        console.info("No synonyms found");
      return synList;
    }
  });
  $.extend({
    GetEmotionDict: function(Text){
      console.log("GetEmotionDict");
      $.ajaxSetup({
        async: false
        });

        var jsondict = {};

        $.ajax({
          url: 'https://apiv2.indico.io/emotion',
          type: 'post',
          data: JSON.stringify({
            'api_key': "2d3c91cb08abe04e37203439107e5ad6",
            'threshold': 0.1,
            'data' : Text
          }),
          // headers: {
          //     'api_key': "2d3c91cb08abe04e37203439107e5ad6",
          //     'threshold': 0.1
          // },
          success: function (data) {
            //console.info(data);
          jsono = JSON.parse(data);
            console.info(jsono);
            jsondict = jsono;

          },
          async: false
      });
      //console.log(maxEmotion[0]);
      return jsondict;
    }
  });

    console.log("Search Thesaurus for better words");
    var Texta = getSelectionText();
    if(Texta.length > 1)
      document.getElementById("RecommendationText").innerHTML = "Please select only one word";
    Text = Texta[0];
    var Emotion = "joy";
    console.log("word: "+ Text);
    synArr = $.GetSynonyms(Text);
    console.log(synArr);

    emotDict = {};
    for (var k = 0; k < synArr.length; k++) {
      emotval = $.GetEmotionDict(synArr[k])[Emotion];
      emotDict[synArr[k]] = emotval;
    }
    var sortedArr = Object.keys(emotDict).map(function(key) {
      return [key, emotDict[key]];
    });  
    sortedArr.sort(function(first, second) {
        return second[1] - first[1];
    });    

    // var relevantWords = [];
    // for(var i=0; i<sortedArr.length; i++){
    //   relevantWords.push(sortedArr[i][0]);
    // }
    // console.log(relevantWords);

    var recText = "";
    for(var i=0; i<sortedArr.length; i++){
      recText += (sortedArr[i][0] + " ");
    }
    console.log(recText);
    document.getElementById("RecommendationText").innerHTML = recText;
}
	
</script>
<div style = "padding:50px">
  <button type = "button" onclick="TextScan()">Measure</p>
  <button type = "button" onclick="jQueryMain()">Word</p>
</div>



  </body>


  <footer class="container-fluid text-center">
  <a href="https://github.com/shuyangw/yhack"> Github </a>
  <a href ="#"> Devpost </a>
</footer>
</html>
